@{
    Layout = "~/Views/Shared/_CenteredLayout.cshtml";

    ViewBag.Title = "Detalle de Atención";
}
@model SistemaDeGestionDeFilas.Areas.FilaVirtual.Models.Atencion
<h2 class="page-header">
    @ViewBag.Title
</h2>
<style>
           table.esconder
           {
               opacity: 0;
               visibility: hidden;
               transition:visibility 0.3s linear, opacity 0.3s linear;
           }
           table
           {
               opacity:20;
               visibility:visible;
               transition:visibility 0.3s linear, opacity 0.3s linear;
           }
        </style>
<div class="entity-editor" ng-controller="AtencionController as atencion">
    <div ng-show="atencion.response.result == false" class="alert alert-danger">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="title">
            Error</h4>
        <p>
            {{atencion.response.value}}</p>
    </div>

    <div ng-show="atencion.info.state == true" class="alert alert-info">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
        <span class="glyphicon glyphicon-info-sign"></span>
            {{atencion.info.message}}
    </div>
    <form ng-if="!atencion.loading" class="form-horizontal" ng-init="atencion.detailInit(tab)" data-toggle="validator" >
        <div class="form-group">
            <label class="col-sm-2 control-label">
                Id</label>
            <div class="col-sm-10">
                <p class="form-control-static" ng-model="atencion.item.Id">
                    {{atencion.item.Id}}</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">
                Punto</label>
            <div class="col-sm-10">
                <p class="form-control-static" ng-model="atencion.item.Email">
                    {{atencion.item.PuntoDescripcion}}</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">
                Ticket</label>
            <div class="col-sm-10">
                <p class="form-control-static" ng-model="atencion.item.Email">
                    {{atencion.item.NroTicket}}</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">
                Mesa</label>
            <div class="col-sm-10">
                <p class="form-control-static" ng-model="atencion.item.Email">
                    {{atencion.item.AgenteId}}</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">
                Usuario</label>
            <div class="col-sm-10">
                <p class="form-control-static" ng-model="atencion.item.Email">
                    {{atencion.item.LogUsr}}</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">
                Estado</label>
            <div class="col-sm-10">
                <p class="form-control-static" ng-model="atencion.item.Email">
                    {{atencion.item.EstadoValor}}</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">
                Emisi&oacute;n</label>
            <div class="col-sm-10">
                <p class="form-control-static" ng-model="atencion.item.Email">
                    @Model.FechaEmision</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">
                Llamado</label>
            <div class="col-sm-10">
                <p class="form-control-static" ng-model="atencion.item.Email">
                    @Model.FechaLlamado</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">
                Inicio</label>
            <div class="col-sm-10">
                <p class="form-control-static" ng-model="atencion.item.Email">
                    @Model.FechaInicio</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">
                Fin</label>
            <div class="col-sm-10">
                <p class="form-control-static" ng-model="atencion.item.Email">
                    @Model.FechaFin</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">Grabaci&oacute;n</label>
            <div class="col-sm-10">
             <audio ng-src="{{atencion.item.url}}" controls="true"></audio>
             <p style="max-width:300px">
                <a ng-click="atencion.download(atencion.item.Id)" class="btn btn-xs btn-default pull-right">Descargar<span style="left:3px" class="glyphicon glyphicon-download"></span></a>
             </p>
            </div>
        </div>
        <!--div class="col-sm-10">
            <label class="control-label">Transacciones </label>
            <span id="eyeSpan" ng-click="atencion.show()" class="glyphicon glyphicon-eye-open pull-right"></span>
        
        </div>
        
        <div class="form-group">
            <div class="col-sm-10">
                <table id="transacTable" class="table" style="margin: 4px">
                    <tr ng-if="atencion.loading">
                        <td>Obteniendo datos...</td>
                        <td></td>
                    </tr>
                    <tr ng-if="atencion.items.length==0 && !atencion.loading">
                        <td>No hay registros</td>
                        <td></td>
                    </tr>
                        <tr ng-repeat="trans in atencion.item.transacciones">
                            <td>
                                {{trans.ServicioValor}}
                            </td>
                        </tr>
                </table>
            </div>
        </div-->
        <div class="text-right">
            <a ng-click="atencion.index(tab)" class="btn btn-sm btn-link" data-ajax>Volver</a>
            <a ng-click="atencion.transacciones(tab, atencion.item.Id)" class="btn btn-sm btn-primary">Transacciones</a>
        </div>
    </form>
</div>